# Cloud Technologies and Services

### –õ–∞–±–æ—Ä–∞—Ç–æ—Ä–Ω–∞—è 1, –æ–±—ã—á–Ω–∞—è –≤–µ—Ä—Å–∏—è.

#### Lyutiy Nick, Mitrofanova Polina, Trikula Artyom, Muldiyarov Arseniy

> [!WARNING]
> –≠—Ç–æ—Ç –æ—Ç—á—ë—Ç –Ω–µ —è–≤–ª—è–µ—Ç—Å—è –Ω–∏ –æ–±–≤–∏–Ω–µ–Ω–∏–µ–º, –Ω–∏ –∏—Å–ø–æ–≤–µ–¥—å—é. –≠—Ç–æ —Ç–æ–ª—å–∫–æ –ø–æ–ø—ã—Ç–∫–∞ —Ä–∞—Å—Å–∫–∞–∑–∞—Ç—å –æ –≤—Ä–µ–º–µ–Ω–∏, –∫–æ—Ç–æ—Ä–æ–µ –ø–æ–≥—É–±–∏–ª linux, –æ
> —Ç–µ—Ö, –∫—Ç–æ —Å—Ç–∞–ª –µ–≥–æ –∂–µ—Ä—Ç–≤–æ–π (–æ–±–æ –º–Ω–µ), –¥–∞–∂–µ –µ—Å–ª–∏ —Å–ø–∞—Å—Å—è –æ—Ç –¥–æ–∫–µ—Ä–∞.

## –ù–∞—á–∞–ª–æ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è

–í—Å—ë –Ω–∞—á–∞–ª–æ—Å—å —Å –≤—ã–±–æ—Ä–∞ –ø–ª–∞—Ç—Ñ–æ—Ä–º—ã. –í–Ω–∞—á–∞–ª–µ —è —Ö–æ—Ç–µ–ª –¥–µ–ª–∞—Ç—å –Ω–∞ windows, –Ω–æ –ø–æ—Å–ª–µ –Ω–µ–±–æ–ª—å—à–æ–≥–æ —Ä–µ—Å—ë—Ä—á–∞ –æ–∫–∞–∑–∞–ª–æ—Å—å, —á—Ç–æ –≤—Å—ë-—Ç–∞–∫–∏
nginx, –∫–∞–∫ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç, –±–æ–ª—å—à–µ –∑–∞—Ç–æ—á–µ–Ω –ø–æ–¥ linux

–¢–æ–≥–¥–∞ –º–Ω–µ –ø–æ–∫–∞–∑–∞–ª–æ—Å—å, —á—Ç–æ –≥–æ—Ä–∞–∑–¥–æ –±–æ–ª–µ–µ –ø–æ–ª–µ–∑–Ω–æ –±—É–¥–µ—Ç –≤—ã–ø–æ–ª–Ω—è—Ç—å —Ä–∞–±–æ—Ç—É –Ω–∞ linux-–ø–æ–¥–æ–±–Ω—ã—Ö —Å–∏—Å—Ç–µ–º–∞—Ö, –∞ –∏–º–µ–Ω–Ω–æ –Ω–∞
–≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–π –º–∞—à–∏–Ω–∫–µ —Å Ubuntu.
–°–ª–µ–¥—É—é—â–∏–π –≤–æ–ø—Ä–æ—Å: –∫–∞–∫–∏–µ –ø—Ä–æ–µ–∫—Ç—ã —Ö–æ—Å—Ç–∏—Ç—å? –°–æ–±—Å—Ç–≤–µ–Ω–Ω—ã—Ö –ø–æ–¥—Ö–æ–¥—è—â–∏—Ö –∫–∞–∫-—Ç–æ –Ω–µ –Ω–∞—à–ª–æ—Å—å, –∞ –ø—Ä–æ—Å—Ç–æ –≤—ã–≤–æ–¥–∏—Ç—å html-—Å—Ç—Ä–∞–Ω–∏—á–∫—É ‚Äî
—Å–ª–∏—à–∫–æ–º —Å–∫—É—á–Ω–æ :(

–ù—É –∏ —è –≤—ã—à–µ–ª –≤ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç —Å —ç—Ç–∏–º –≤–æ–ø—Ä–æ—Å–æ–º. –ù–∞—à–ª–∏—Å—å 2 –ø—Ä–æ—Å—Ç–µ–Ω—å–∫–∏—Ö –ø—Ä–æ–µ–∫—Ç–∞, –∫–æ—Ç–æ—Ä—ã–µ, –æ–¥–Ω–∞–∫–æ,
–∏—Å–ø–æ–ª—å–∑—É—é—Ç –≤–µ—Å—å –Ω–∞–±–æ—Ä —Ä–µ–∞–ª—å–Ω—ã—Ö –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤: back-end –Ω–∞ Python (Django / FastAPI), front-end –Ω–∞ Vue –∏ –¥–∞–∂–µ
–±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö (PostgreSQL / MySQL).

### [–ü—Ä–æ–µ–∫—Ç –Ω–æ–º–µ—Ä —Ä–∞–∑](https://github.com/SteynGuelen/Boilerplate-FastAPI-Vue3-Vite-Postgres)

![–ü—Ä–æ–µ–∫—Ç —Ä–∞–∑](images/project1.png)
> [!TIP]
>
> - Front-end –∂–∏–≤—ë—Ç –Ω–∞ 5173 –ø–æ—Ä—Ç—É
> - Back-end ‚Äî –Ω–∞ 8000
> - Postgres ‚Äî –Ω–∞ 5432

### [–ü—Ä–æ–µ–∫—Ç –Ω–æ–º–µ—Ä –¥–≤–∞](https://github.com/hbilu/DjangoWebApp_FrontendBackend)

![–ü—Ä–æ–µ–∫—Ç –¥–≤–∞](images/project2.png)
> [!TIP]
>
> - –ê —Ç—É—Ç Front-end –≤–º–µ—Å—Ç–µ Back-end'–æ–º –≤–º–µ—Å—Ç–µ –Ω–∞ 8000
> - MySQL ‚Äî –Ω–∞ 3306

## –ü–µ—Ä–≤—ã–µ —à–∞–≥–∏

–ü–æ—Å–ª–µ —ç—Ç–æ–≥–æ —É –º–µ–Ω—è –Ω–∞—á–∞–ª –ø—Ä–∏–º–µ—Ä–Ω–æ —Å–∫–ª–∞–¥—ã–≤–∞—Ç—å—Å—è –ø–ª–∞–Ω –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è —Ä–∞–±–æ—Ç—ã. –¢–∞–∫ –∫–∞–∫ –≤—ã–±—Ä–∞–Ω–Ω—ã–µ –ø—Ä–æ–µ–∫—Ç—ã –æ–∫–∞–∑–∞–ª–∏—Å—å
—Ä–∞–±–æ—á–∏–º–∏ –∏ —Å–ø–æ–∫–æ–π–Ω–æ –∑–∞–ø—É—Å–∫–∞–ª–∏—Å—å —Å –ø–æ–º–æ—â—å—é docker compose, –º–Ω–µ –∑–∞—Ö–æ—Ç–µ–ª–æ—Å—å –∏–º–µ—Ç—å –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –∏—Ö –∑–∞–ø—É—Å–∫–∞ –∏–∑ —Ä–∞–∑–Ω—ã—Ö
docker-compose —Ñ–∞–π–ª–æ–≤, –Ω–µ –æ–±—ä–µ–¥–∏–Ω—è—è –∏—Ö –≤ –æ–¥–∏–Ω. –¢–∞–∫–æ–π –ø–æ–¥—Ö–æ–¥ –ø–æ–∑–≤–æ–ª–∏–ª –±—ã –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ –±–æ–ª–µ–µ —É–¥–æ–±–Ω–æ —Ä–∞–∑–≤–∏–≤–∞—Ç—å –ø—Ä–æ–µ–∫—Ç—ã
–Ω–µ–∑–∞–≤–∏—Å–∏–º–æ, –Ω–µ –ø—Ä–∏–≤—è–∑—ã–≤–∞—è—Å—å –∫ –æ–¥–Ω–æ–º—É –æ–≥—Ä–æ–º–Ω–æ–º—É docker-compose —Ñ–∞–π–ª—É. –ê –∑–Ω–∞—á–∏—Ç –Ω–∞–º –ø–æ–Ω–∞–¥–æ–±–∏—Ç—Å—è –æ–±—ä–µ–¥–∏–Ω–∏—Ç—å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã –≤
—Å–µ—Ç—å. –í —Å–≤—è–∑–∏ —Å —ç—Ç–∏–º –±—ã—Å—Ç—Ä–µ–Ω—å–∫–æ –≤–æ–∑–Ω–∏–∫ –ø–ª–∞–Ω:

1) –î–æ–±–∞–≤–∏—Ç—å —Å–≤–æ–∏ —Ç–µ—Å—Ç–æ–≤—ã–µ –¥–æ–º–µ–Ω–Ω—ã–µ –∏–º–µ–Ω–∞ [->](#–¥–æ–±–∞–≤–ª–µ–Ω–∏–µ-–¥–æ–º–µ–Ω–æ–≤)
2) –°–æ–∑–¥–∞—Ç—å —Å–µ—Ç—å –¥–ª—è –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤ [->](#—Å–æ–∑–¥–∞–Ω–∏–µ-docker-—Å–µ—Ç–∏)
3) –í–Ω–µ—Å—Ç–∏ –Ω–µ–±–æ–ª—å—à–∏–µ –ø—Ä–∞–≤–∫–∏ –≤ docker-compose —Ñ–∞–π–ª—ã
   –ø—Ä–æ–µ–∫—Ç–æ–≤: [—Ä–∞–∑](Boilerplate-FastAPI-Vue3-Vite-Postgres/docker-compose.yml)
   –∏ [–¥–≤–∞](DjangoWebApp_FrontendBackend/docker-compose.yml) [->](#–ø—Ä–∞–≤–∏–º-docker-compose) 
4) –°–æ–∑–¥–∞—Ç—å —Ç—Ä–µ—Ç–∏–π [docker-compose —Ñ–∞–π–ª —Å nginx](nginx/docker-compose.yml) [->](#—Å–æ–∑–¥–∞–Ω–∏–µ-docker-compose-—Å-nginx)
5) –ù–∞–ø–∏—Å–∞—Ç—å –±–∞–∑–æ–≤—ã–π [–∫–æ–Ω—Ñ–∏–≥ nginx](nginx/default.conf) [->](#—Å–æ–∑–¥–∞–Ω–∏–µ-–±–∞–∑–æ–≤–æ–≥–æ-–∫–æ–Ω—Ñ–∏–≥–∞-nginx)
6) –î–æ–±–∞–≤–∏—Ç—å –∞–ª–∏–∞—Å—ã –¥–ª—è —Å—Ç–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –∫–æ–Ω—Ç–µ–Ω—Ç–∞ [->](#—Ä–∞–±–æ—Ç–∞-—Å–æ-—Å—Ç–∞—Ç–∏–∫–æ–π)
7) –î–æ–±–∞–≤–∏—Ç—å —Å–∞–º–æ–ø–æ–¥–ø–∏—Å–∞–Ω–Ω—ã–π —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç –∏ —Ä–∞–±–æ—Ç—É —Å https [->](#—Ç–∞–Ω—Ü—ã-—Å-–±—É–±–Ω–∞–º–∏-—Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–∞–º–∏)

## –ü–µ—Ä–≤—ã–µ –ø—Ä–æ–±–ª–µ–º—ã

–†–∞–±–æ—Ç–∞ —Å linux –Ω–∞—á–∞–ª–∞—Å—å —Å–æ–≤—Å–µ–º –Ω–µ —Ç–∞–∫, –∫–∞–∫ —Ö–æ—Ç–µ–ª–æ—Å—å. –í–Ω–∞—á–∞–ª–µ —è –æ–±—Ä–∞–Ω–∞—Ä—É–∂–∏–ª, —á—Ç–æ –º–æ—è —Å—Ç–∞—Ä–∞—è –≤–∏—Ä—Ç—É–∞–ª–∫–∞ –¥–∞–∂–µ –Ω–µ –ø—ã—Ç–∞–µ—Ç—Å—è
–∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è.

<figure>
    <img src="images/vb_error.png" alt="–ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–π —Ç–µ–∫—Å—Ç" />
    <figcaption style="text-align: center">–ö–∞—Ä—Ç–∏–Ω–∫–∞ –∏–∑ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç–∞, –Ω–æ —É –º–µ–Ω—è –±—ã–ª–∞ –æ—á–µ–Ω—å –ø–æ—Ö–æ–∂–∞—è –æ—à–∏–±–∫–∞</figcaption>
</figure>

–ù—É –≤ —Ü–µ–ª–æ–º –ª–∞–¥–Ω–æ, –Ω–∏—á–µ–≥–æ —Å—Ç—Ä–∞—à–Ω–æ–≥–æ, —Å–¥–µ–ª–∞–µ–º –Ω–æ–≤—É—é. –ù–∞—à—ë–ª –Ω–∞ –Ω–æ—É—Ç–±—É–∫–µ –æ–±—Ä–∞–∑, —É—Å—Ç–∞–Ω–æ–≤–∏–ª. –ö–∞–∑–∞–ª–æ—Å—å –±—ã, –≤–æ—Ç,
–º–æ–∂–Ω–æ –≤—ã–ø–æ–ª–Ω—è—Ç—å –ª–∞–±–æ—Ä–∞—Ç–æ—Ä–Ω—É—é —Ä–∞–±–æ—Ç—É, –Ω–æ (–≤–Ω–µ–∑–∞–ø–Ω–æ) –æ–∫–∞–∑–∞–ª–æ—Å—å, —á—Ç–æ –Ω–∞ —á–∏—Å—Ç–æ–π –º–∞—à–∏–Ω–µ –Ω–∏—á–µ–≥–æ –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ –∏ –Ω–µ—Ç –Ω–∏–∫–∞–∫–∏—Ö
–∞–∫–∫–∞—É–Ω—Ç–æ–≤. –û–∫–µ–π, –Ω–∞—á–∏–Ω–∞–µ–º —É—Å—Ç–∞–Ω–æ–≤–∫—É. –í—Å—ë —à–ª–æ –Ω–µ–ø–ª–æ—Ö–æ –¥–æ —Ç–æ–≥–æ –º–æ–º–µ–Ω—Ç–∞, –∫–∞–∫ –º–Ω–µ –ø–æ–Ω–∞–¥–æ–±–∏–ª–æ—Å—å —Å—Ç—è–Ω—É—Ç—å —Å github —ç—Ç–æ—Ç
—Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π. –≠—Ç–æ –ø–æ–ª—É—á–∏–ª–æ—Å—å –Ω–µ —Å –ø–µ—Ä–≤–æ–≥–æ —Ä–∞–∑–∞, –Ω–æ —Ç–æ–∂–µ –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –±—ã—Å—Ç—Ä–æ. –ê –≤–æ—Ç –ø–æ–ø—ã—Ç–∫–∏ –∑–∞–ø—É—à–∏—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è –∑–∞—Ç—è–Ω—É–ª–∏—Å—å
–≥–¥–µ-—Ç–æ –Ω–∞ —á–∞—Å. –í –∏—Ç–æ–≥–µ –ø—Ä–∏—à–ª–æ—Å—å –≤—Å–ø–æ–º–∏–Ω–∞—Ç—å, –∫–∞–∫ —Ä–∞–±–æ—Ç–∞—Ç—å —Å ssh, –ø–æ—Ç–æ–º—É —á—Ç–æ –ø–æ http —É –º–µ–Ω—è —Ç–∞–∫ –∏ –Ω–µ –≤—ã—à–ª–æ –∑–∞–ª–æ–≥–∏–Ω–∏—Ç—å—Å—è :(
–ù—É –∏ –ª–∞–¥–Ω–æ, —Å–¥–µ–ª–∞–ª –Ω–æ–≤—ã–π –∫–ª—é—á, –¥–æ–±–∞–≤–∏–ª –µ–≥–æ –≤ –∞–∫–∫–∞—É–Ω—Ç github, –∏ –≤–æ—Ç –∏–∑–º–µ–Ω–µ–Ω–∏—è –ª–µ–∂–∞—Ç –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏. –û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–ª
`/etc/host`, –¥–æ–±–∞–≤–∏–≤ —Ç—É–¥–∞ —Ç–µ—Å—Ç–æ–≤—ã–µ –¥–æ–º–µ–Ω—ã (`project1.local`, `project2.local`). –î–∞–ª–µ–µ —Å–ª–µ–¥–æ–≤–∞–ª –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –¥–ª–∏—Ç–µ–ª—å–Ω—ã–π
—ç—Ç–∞–ø —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è docker-compose —Ñ–∞–π–ª–æ–≤, –∞ —Ç–∞–∫–∂–µ –Ω–∞–ø–∏—Å–∞–Ω–∏—è nginx –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏, –Ω–æ –æ–± —ç—Ç–æ–º —á—É—Ç—å –Ω–∏–∂–µ. –í –∏—Ç–æ–≥–µ
–∑–∞–ø—É—Å–∫–∞—é
–≤—Å–µ docker compose —Ñ–∞–π–ª—ã –∏... –ü–æ–Ω–∏–º–∞—é, —á—Ç–æ –Ω–∞ –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–π –º–∞—à–∏–Ω–µ –ø—Ä–æ–µ–∫—Ç—ã –ø—Ä–æ—Å—Ç–æ –Ω–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ —Ä–∞–±–æ—Ç–∞—é—Ç:
<figure>
    <img src="images/vm_error.png" alt="–ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–π —Ç–µ–∫—Å—Ç" />
    <figcaption style="text-align: center">–í –æ–¥–Ω–æ–º –∏–∑ –ø—Ä–æ–µ–∫—Ç–æ–≤ –ø—Ä–æ—Å—Ç–æ –æ—Ç—Å—É—Ç—Å—Ç–≤—É—é—Ç —Ç–∞–±–ª–∏—Ü—ã –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö</figcaption>
</figure>
–¢–µ—Å—Ç–∏—Ä—É—é –Ω–∞ windows - –≤—Å—ë —Ö–æ—Ä–æ—à–æ... –ù—É –∏ –≤ –æ–±—â–µ–º, –±—ã–ª–æ —Ä–µ—à–µ–Ω–æ –æ—Å—Ç–∞–≤–∏—Ç—å –∏–¥–µ—é —Å –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–π –º–∞—à–∏–Ω–æ–π –∏ –≤—Å—ë-—Ç–∞–∫–∏ —Å–¥–µ–ª–∞—Ç—å
—Ä–∞–±–æ—Ç—É –Ω–∞ windows, –Ω–æ —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–º Docker. –¢–∞–∫–æ–π —Å–≤–æ–µ–æ–±—Ä–∞–∑–Ω—ã–π –∫–æ–º–ø—Ä–æ–º–∏—Å. –ù—É —Ç–∞–∫ –≤–æ—Ç, –ø–æ–¥—Ä–æ–±–Ω–µ–µ –æ —Ä–∞–±–æ—Ç–µ:

## –í—ã–ø–æ–ª–Ω–µ–Ω–∏—è —Ä–∞–±–æ—Ç—ã

### –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –¥–æ–º–µ–Ω–æ–≤

–î–ª—è –Ω–∞—á–∞–ª–∞ –Ω—É–∂–Ω–æ –±—ã–ª–æ –¥–æ–±–∞–≤–∏—Ç—å —Ç–µ—Å—Ç–æ–≤—ã–µ –¥–æ–º–µ–Ω–Ω—ã–µ –∏–º–µ–Ω–∞ –≤ —Å–∏—Å—Ç–µ–º–Ω—ã–π —Ñ–∞–π–ª hosts. –≠—Ç–æ—Ç —Ñ–∞–π–ª —è–≤–ª—è–µ—Ç—Å—è —Å—Ç–∞—Ç–∏—á–µ—Å–∫–æ–π —Ç–∞–±–ª–∏—Ü–µ–π
—Å–æ–ø–æ—Å—Ç–∞–≤–ª–µ–Ω–∏–π –¥–æ–º–µ–Ω–Ω—ã—Ö –∏–º—ë–Ω IP-–∞–¥—Ä–µ—Å–∞–º –∏ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç—Å—è –¥–æ –æ–±—Ä–∞—â–µ–Ω–∏—è –∫ DNS-—Å–µ—Ä–≤–µ—Ä–∞–º. –ù–∞—Ö–æ–¥–∏–º —Ñ–∞–π–ª `hosts` –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏
`C:\Windows\System32\drivers\etc\hosts` –∏ –¥–æ–±–∞–≤–ª—è–µ–º —Ç—É–¥–∞ —Å—Ç—Ä–æ–∫–∏:

- `127.0.0.1 project1.local`
- `127.0.0.1 project1.local`:

<figure>
    <img src="images/host.png" alt="–ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–π —Ç–µ–∫—Å—Ç" />
    <figcaption style="text-align: center">–û–±–Ω–æ–≤–ª—ë–Ω–Ω—ã–π —Ñ–∞–π–ª hosts</figcaption>
</figure>

### –°–æ–∑–¥–∞–Ω–∏–µ Docker —Å–µ—Ç–∏

–¢–µ–ø–µ—Ä—å –Ω—É–∂–Ω–æ —Å–æ–∑–¥–∞—Ç—å —Å–µ—Ç—å –î–æ–∫–µ—Ä –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤. –î–ª—è —ç—Ç–æ–≥–æ –≤–æ—Å–ø–æ–ª—å–∑—É–µ–º—Å—è –∫–æ–º–∞–Ω–¥–æ–π `docker network create shared_proxy_net`.
–ü–æ—Å–ª–µ —ç—Ç–æ–≥–æ –Ω—É–∂–Ω–æ –æ—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å docker-compose —Ñ–∞–π–ª—ã, –¥–æ–±–∞–≤–∏–≤ —Ç—É–¥–∞ –∫–∞–∫ —Å–∞–º—É —Å–µ—Ç—å, —Ç–∞–∫ –∏ –∏–º–µ–Ω–∞ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤ –≤ –Ω–µ–π –¥–ª—è
–±–æ–ª–µ–µ —É–¥–æ–±–Ω–æ–≥–æ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è –º–µ–∂–¥—É –Ω–∏–º–∏

![img.png](images/docker_net.png)

#### –ü—Ä–∞–≤–∏–º docker-compose
–í docker-compose —Ñ–∞–π–ª–µ –ø–µ—Ä–≤–æ–≥–æ –ø—Ä–æ–µ–∫—Ç–∞ (—Å frontend/backend) –¥–æ–±–∞–≤–∏–º `networks` –≤ –Ω—É–∂–Ω—ã–µ —Å–µ—Ä–≤–∏—Å—ã:

```yaml
services:
  frontend:
    # ...
    networks:
      shared_proxy_net:
        aliases:
          - project1_frontend

  backend:
    # ...
    networks:
      shared_proxy_net:
        aliases:
          - project1_backend

# –í –∫–æ–Ω—Ü–µ —Ñ–∞–π–ª–∞
networks:
  shared_proxy_net:
    external: true
```

–í docker-compose —Ñ–∞–π–ª–µ –≤—Ç–æ—Ä–æ–≥–æ –ø—Ä–æ–µ–∫—Ç–∞ (–≥–¥–µ frontend/backend –Ω–∞ –æ–¥–Ω–æ–º –ø–æ—Ä—Ç—É django) –¥–æ–±–∞–≤–∏–º –æ–¥–Ω–∏ –Ω–∞–¥—Å—Ç—Ä–æ–∫—É `networks`:

```yaml
services:
  web:
    # ...
    networks:
      shared_proxy_net:
        aliases:
          - project2_web

# –í –∫–æ–Ω—Ü–µ —Ñ–∞–π–ª–∞
networks:
  shared_proxy_net:
    external: true
```

### –°–æ–∑–¥–∞–Ω–∏–µ –±–∞–∑–æ–≤–æ–≥–æ –∫–æ–Ω—Ñ–∏–≥–∞ nginx

–¢–µ–ø–µ—Ä—å –ø–µ—Ä–µ–π–¥—ë–º –∫ –Ω–∞–ø–∏—Å–∞–Ω–∏—é –±–∞–∑–æ–≤–æ–≥–æ –∫–æ–Ω—Ñ–∏–≥–∞ nginx

```nginx
server {
    listen 80;
    listen [::]:80;
    server_name project1.local;
    location / {
        proxy_pass http://project1_frontend:5173;
    }
}

server {
    listen 80;
    listen [::]:80;
    server_name project2.local;
    location / {
        proxy_pass http://project2_web:8000;
        proxy_set_header Host $host;
    }
}
```

–ó–¥–µ—Å—å –æ–ø–∏—Å–∞–Ω—ã –¥–≤–∞ –≤–∏—Ä—Ç—É–∞–ª—å–Ω—ã—Ö —Å–µ—Ä–≤–µ—Ä–∞: –ø–µ—Ä–≤—ã–π –¥–ª—è front-end –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –¥–ª—è –ø–µ—Ä–≤–æ–≥–æ –ø—Ä–æ–µ–∫—Ç–∞, –≤—Ç–æ—Ä–æ–π - back-end +
front-end django –≤—Ç–æ—Ä–æ–≥–æ –ø—Ä–æ–µ–∫—Ç–∞. Nginx —Å–ª—É—à–∞–µ—Ç 80 –ø–æ—Ä—Ç –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç –∏–º–µ–Ω–∏ —Ö–æ—Å—Ç–∞ –ø–µ—Ä–µ–ø—Ä–∞–≤–ª—è–µ—Ç –∑–∞–ø—Ä–æ—Å –ø–æ –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏–π
—Å–µ—Ç–∏ Docker.

### –°–æ–∑–¥–∞–Ω–∏–µ docker-compose —Å nginx

–î–ª—è –∑–∞–ø—É—Å–∫–∞ nginx —Ç–∞–∫ –∂–µ –≤–æ—Å–ø–æ–ª—å–∑—É–µ–º—Å—è docker-compose —Å —Å–µ—Ä–≤–∏—Å–æ–º `nginx`, –∫—É–¥–∞ –≤ –¥–∞–ª—å–Ω–µ–π—à–µ–º –¥–æ–±–∞–≤–∏–º volumes –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è
—Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏—Ö –¥–∞–Ω–Ω—ã—Ö.

```yaml
version: "3.9"
services:
  nginx:
    image: nginx:1.25-alpine
    container_name: nginx-proxy
    ports:
      - "80:80"
      - "443:443"
    volumes:
      - ./default.conf:/etc/nginx/conf.d/default.conf:ro
    networks:
      - shared_proxy_net

networks:
  shared_proxy_net:
    external: true
```

–ó–¥–µ—Å—å –ø—Ä–æ—Å–ª—É—à–∏–≤–∞—é—Ç—Å—è –¥–≤–∞ –ø–æ—Ä—Ç–∞: 80 –¥–ª—è http —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è –∏ 443 - –¥–ª—è https. –¢–∞–∫ –∂–µ nginx –¥–æ–±–∞–≤–ª–µ–Ω –≤ —Ä–∞–Ω–µ–µ —Å–æ–∑–¥–∞–Ω–Ω—É—é —Å–µ—Ç—å
–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤ `shared_proxy_net`

### –†–∞–±–æ—Ç–∞ —Å–æ —Å—Ç–∞—Ç–∏–∫–æ–π

–¢–µ–ø–µ—Ä—å —Å–æ–∑–¥–∞–¥–∏–º –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ —Å –∫–∞—Ä—Ç–∏–Ω–∫–∞–º–∏ - `static` - –∏ –¥–æ–±–∞–≤–∏—Ç—å –∞–ª–∏–∞—Å—ã —á—Ç–æ–±—ã nginx –Ω–∞–ø—Ä—è–º—É—é –æ—Ç–¥–∞–≤–∞–ª —Ñ–∞–π–ª—ã (—Å—Ç–∞—Ç–∏–∫—É). –í
nginx/default.conf –¥–æ–±–∞–≤–ª—è–µ–º location /static/ –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–≥–æ —Ö–æ—Å—Ç–∞:

```nginx
server {
    ...

    location /static/ {
        alias /var/www/project1_static/;
        try_files $uri $uri/ =404;
    }

    ...
}

server {
    ...

    location /static/ {
        alias /var/www/project2_static/;
        try_files $uri $uri/ =404;
    }

    ...
}
```

–ß—Ç–æ–±—ã –ø—É—Ç—å `/var/www/project1_static/` –≤–Ω—É—Ç—Ä–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ —É–∫–∞–∑—ã–≤–∞–ª –Ω–∞ project1/static –Ω–∞ —Ö–æ—Å—Ç–µ, –¥–æ–±–∞–≤–∏–º –≤ docker compose
–¥–ª—è nginx —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–µ —Ç–æ–º–∞:

```yaml
volumes:
  - ./default.conf:/etc/nginx/conf.d/default.conf:ro
  - ../project1/static:/var/www/project1_static:ro
  - ../project2/static:/var/www/project2_static:ro
```

`ro` –æ–∑–Ω–∞—á–∞–µ—Ç ¬´read-only¬ª ‚Äî nginx –±—É–¥–µ—Ç —Ç–æ–ª—å–∫–æ —á–∏—Ç–∞—Ç—å —Ñ–∞–π–ª—ã.
–ò —Ç–µ–ø–µ—Ä—å –º–æ–∂–µ–º –≤ –±—Ä–∞—É–∑–µ—Ä–µ –Ω–∞—Å–ª–∞–¥–∏—Ç—å—Å—è –Ω–∞—à–∏–º–∏ –∫–∞—Ä—Ç–∏–Ω–∫–∞–º–∏, –≤—ã–¥–∞–≤–∞–µ–º—ã–º–∏ nginx'–æ–º

![cat.png](images/cat.png)
![dog.png](images/dog.png)

### –¢–∞–Ω—Ü—ã —Å ~~–±—É–±–Ω–∞–º–∏~~ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–∞–º–∏

–ê —Ç–µ–ø–µ—Ä—å –¥–∞–≤–∞–π—Ç–µ —Å–≥–µ–Ω–µ—Ä–∏—Ä—É–µ–º —Å–∞–º–æ–ø–æ–¥–ø–∏—Å–∞–Ω–Ω—ã–π —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç –∏ –¥–æ–±–∞–≤–∏–º –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ HTTP-–∑–∞–ø—Ä–æ—Å–æ–≤ —Å 80 –ø–æ—Ä—Ç–∞ –Ω–∞ 443 –ø–æ—Ä—Ç
HTTPS –¥–ª—è –±–µ–∑–æ–ø–∞—Å–Ω–æ–≥–æ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è.

–í–Ω–∞—á–∞–ª–µ —Å–≥–µ–Ω–µ—Ä–∏—Ä—É–µ–º —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç. –î–ª—è —ç—Ç–æ–≥–æ –ø–æ–¥–≥–æ—Ç–æ–≤–∏–º [–∫–æ–Ω—Ñ–∏–≥ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –∫–ª—é—á–∞](nginx/certs/openssl.cfg), –ø–µ—Ä–µ–¥—ë–º –≤
–¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é `nginx/certs` –∏ –≤—ã–ø–æ–ª–Ω–∏–º –∫–æ–º–∞–Ω–¥—É (–¥–ª—è —É–¥–æ–±—Å—Ç–≤–∞ –∏—Å–ø–æ–ª—å–∑—É–µ–º wsl):

```bash
openssl req -x509 -nodes -days 3650 \
  -newkey rsa:2048 \
  -keyout certs/privkey.pem \
  -out certs/fullchain.pem \
  -config certs/openssl.cnf \
  -extensions v3_req
```

![generate_cert.png](images/generate_cert.png)

- –ü–∞—Ä–∞–º–µ—Ç—Ä `-x509` –æ—Ç–≤–µ—á–∞–µ—Ç –∑–∞ —Å–æ–∑–¥–∞–Ω–∏–µ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–∞ –≤ X.509 (–∞ –Ω–µ CSR).
- `-config` ‚Äî –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –∑–∞—Ä–∞–Ω–µ–µ –ø–æ–¥–≥–æ—Ç–æ–≤–ª–µ–Ω–Ω—ã–π –∫–æ–Ω—Ñ–∏–≥
- `-nodes` ‚Äî –æ—Ç–∫–ª—é—á–∞–µ—Ç —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–∏–≤–∞—Ç–Ω–æ–≥–æ –∫–ª—é—á–∞, —á—Ç–æ–±—ã nginx –º–æ–≥ —á–∏—Ç–∞—Ç—å –µ–≥–æ –±–µ–∑ –≤–≤–æ–¥–∞ –ø–∞—Ä–æ–ª—è.
- `-newkey rsa:2048` –ø–æ–∑–≤–æ–ª—è–µ—Ç –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ —Å —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–æ–º —Å–æ–∑–¥–∞—Ç—å –Ω–æ–≤—ã–π –ø—Ä–∏–≤–∞—Ç–Ω—ã–π –∫–ª—é—á RSA.

–ü–æ—Å–ª–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è —Å–æ–∑–¥–∞—é—Ç—Å—è –¥–≤–∞ —Ñ–∞–π–ª–∞: [–ø—Ä–∏–≤–∞—Ç–Ω—ã–π –∫–ª—é—á](nginx/certs/privkey.pem)
–∏ [—Å–∞–º —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç](nginx/certs/fullchain.pem). –î–æ–±–∞–≤–∏–º –∏—Ö –≤ –∫–æ–Ω—Ñ–∏–≥ nginx, –ø—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω–æ –ø–æ–¥–≥–æ—Ç–æ–≤–∏–≤ —Ä–µ–¥–∏—Ä–µ–∫—Ç —Å 80 –ø–æ—Ä—Ç–∞:

```nginx
server {
    listen 80;
    server_name project1.local project2.local;
    return 301 https://$host$request_uri;
}

server {
    listen 443 ssl;
    server_name project1.local;

    ssl_certificate /etc/nginx/certs/fullchain.pem;
    ssl_certificate_key /etc/nginx/certs/privkey.pem;

    ...
}

server {
    listen 443 ssl;
    server_name project2.local;

    ssl_certificate /etc/nginx/certs/fullchain.pem;
    ssl_certificate_key /etc/nginx/certs/privkey.pem;

    ...
}

```

–ò —Ç–µ–ø–µ—Ä—å –∫–æ–≥–¥–∞ –º—ã –ø–µ—Ä–µ—Ö–æ–¥–∏–º –Ω–∞ `http://project1.local` –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç —Ä–µ–¥–∏—Ä–µ–∫—Ç –∏ –º—ã –≤–∏–¥–∏–º...

![no_443_port.png](images/no_443_port.png)
... —á—Ç–æ –∑–∞–±—ã–ª–∏ –ø—Ä–æ–±—Ä–æ—Å–∏—Ç—å 443 –ø–æ—Ä—Ç –≤ docker-compose ü•∞

–ë—ã—Å—Ç—Ä–µ–Ω—å–∫–æ –ø—Ä–∞–≤–∏–º:

```yaml
ports:
  - "80:80"
  - "443:443"
```

–ò –≤–∏–¥–∏–º...

![warning.png](images/warning.png)
... —Å–æ–æ–±—â–µ–Ω–∏–µ –æ —Ç–æ–º, —á—Ç–æ —Å–∞–π—Ç –ø—Ä–∏–Ω–∞–¥–ª–µ–∂–∏—Ç –∑–ª–æ—É–º—ã—à–ª–µ–Ω–Ω–∏–∫–∞–º.

–ß—Ç–æ–±—ã —ç—Ç–æ –∏—Å–ø—Ä–∞–≤–∏—Ç—å, –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –≤—Ä—É—á–Ω—É—é –¥–æ–±–∞–≤–∏—Ç—å —Å–æ–∑–¥–∞–Ω–Ω—ã–π
—Ä–∞–Ω–µ–µ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç –≤ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ –¥–æ–≤–µ—Ä–µ–Ω–Ω—ã—Ö —Ü–µ–Ω—Ç—Ä–æ–≤ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ –Ω–∞ Windows. –î–ª—è —ç—Ç–æ–≥–æ –ø–µ—Ä–µ—Ö–æ–¥–∏–º –≤ Microsoft Management
Console –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–∞–º–∏ –∏ –¥–æ–±–∞–≤–ª—è–µ–º –Ω–∞—à:

![add_cert.png](images/add_cert.png)
![add_cert_2.png](images/add_cert_2.png)
![added_cert.png](images/added_cert.png)

## –ò —Å–ø—É—Å—Ç—è –Ω–µ—Å–∫–æ–ª—å–∫–æ –¥–Ω–µ–π —Ä–∞–¥–æ—Å—Ç–∏ –∏ –≤–µ—Å–µ–ª—å—è - –ø–æ–±–µ–¥–∞, –Ω–∞–∫–æ–Ω–µ—Ü-—Ç–æ –Ω–∞—à–∏ —Å–∞–π—Ç—ã —Ä–∞–±–æ—Ç–∞—é—Ç –∏ –±—Ä–∞—É–∑–µ—Ä –Ω–µ —Ä—É–≥–∞–µ—Ç—Å—è!

<div>
    <img src="images/project1.png">
    <img src="images/project2.png">
</div>
