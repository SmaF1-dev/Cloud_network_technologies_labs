# Cloud Technologies and Services
### Лабораторная 1, версия со звездочкой.

#### Lyutiy Nick, Mitrofanova Polina, Trikula Artyom, Muldiyarov Arseniy

## Начало выполнения

Выполнение лабораторной работы началось спонтанно, когда Артем заметил на сайте факультета `fpin-itmo.ru` возможность перехода в панель авторизации администратора, прописав `/admin` в адресной строке. 

![Вход в админ-панель](images/image_1.png)

#### Заметив это нам стало интересно поискать еще такие возможности открытия странных разделов сайта. Но мы выбрали 2 разных маршрута:
- Артем увидев, что авторизация сделана на django решил перебирать адресную строку ручками.
- Я захотел попробовать автоматизировать процесс, прочитав из текста лабораторной про существование `ffuf`.

### Результаты Артема

По итогу перебора страницы ему удалось обнаружить маршрут `/api` на сайте, но, к сожалению, попытки перейти по путям, указанным там не увенчались более успехом :(
    ![api на fpin.itmo](images/image_2.png)

### Мои результаты

Первым делом я полез выяснять, что за штука такая ffuf и как ей вообще пользоваться. Сначала нашел репозиторий на GitHub, ну а дойти до ссылки на скачивание нормальной версии программы для Win11 уже не составило труда. 

![alt text](images/image_3.png)

Скачав версию программы я подумал: "Круто, уже можно пользоваться". Но оказалось все немного сложнее. Для ее работы необходим список популярных названий страниц сайта. 

Составлять его самому сразу показалось глупой идеей, ведь 1000% нашелся уже какой-то умный бородатый дядька, который составил такой список. 

Поиски с помощью ~~ChatGPT~~ "умного друга" снова привели меня в какой-то GitHub репозиторий, где было как раз то, что мне нужно.

![Репо со списком слов](images/image_4.png)

P.S. я не ошибся, сказав, что какой-то умный бородатый дядька уже это делал)

![Бородатый мужик](images/image_5.png)

## Работа с ffuf

Для запуска ffuf использовалась команда:

```bash
ffuf.exe -u https://example.com/FUZZ -w common.txt -mc 200,302,403
```

Т.е. на место слово FUZZ вставали слова из файла, а благодаря фильтру по кодам ошибок не было "мусорных" выводов.

### Проверка сайта abit.itmo

Для проверки программы я решил проверить сайт `abit.itmo.ru` (просто сайт fpin выглядит так, будто вообще мог сломаться насовсем) и не прогадал :)

![alt text](images/image_6.png)

Проверив ручками подозрительные страницы было найдено кое-что интересное: есть возможность перехода на страницу `/edit`. 

![alt text](images/image_7.png)

И даже есть возможность что-то потыкать на этой странице.

![alt text](images/image_8.png)

Но жаль, что лишь до момента выбора языка :(

Дальше уже вылезает страница авторизации админа.

![alt text](images/image_9.png)

Остальные адреса не дали ничего интересного и я погнал дальше :)

### Проверка сайта fpin.itmo

Тут проверка шла заметно дольше, чем на abit.itmo, но была по большей части безрезультатная :(

![alt text](images/image_10.png)

Хоть и очень много маршрутов с кодом 200, на самом же деле при переходе на них ты попадаешь на просто белую страницу. 

Могли бы и что-то поинтереснее придумать (-_-)

![alt text](images/image_11.png)

Я расстроился, но подумал, что хочется проверить еще сайты так, но не тут-то было...

![alt text](images/image_14.png)

Честно говоря, сердце улетело в пятки, ибо я знал, что к этому преподавателю мне идти завтра на пару. 

Но к счастью оказалось, что это был розыгрыш от Артема и я теперь просто его ненавижу и хочу убить :)

### Проверка сайта study.physics.itmo

Тут мой выбор был неожиданным даже для меня. Почему решил устроить проверку сайтам именно ITMO - вообще без понятия. Ну а у нас как раз началась физика, так почему их сайт бы и не прогнать через `ffuf` :)

Тут ситуация была наиболее интересной из всех.

![alt text](images/image_12.png)

Тут программа выдала необычные маршруты, большая часть которых была связана с Git. Я решил проверить, что же там лежит и оказалось, что при переходе по адресам `.gitattributes`, `.config`, `.git/HEAD` и т.д. реально скачиваются файлы с репозитория сайта физики.

![alt text](images/image_13.png)

Пусть по сути это тот же перебор маршрутов сайта, но уязвимость может быть более критичной, чем в случае просто оставленных бесхозных файлов, так что можно выделить как подкатегорию уязвимости и проверить.

Мне захотелось попробовать восстановить репозиторий с помощью git_dump, но там все тухло :(

![alt text](images/image_18.png)

> P.S. Все, что получилось вытянуть лежит в директории `physics_dump`

### Работа с `securityheaders.com`

Проверка заголовков была проведена над теми же сайтами ITMO.

Результаты проверки:

![alt text](images/image_15.png)


![alt text](images/image_16.png)

![alt text](images/image_17.png)

Как можно заметить по результатам, на сайте `abit.itmo` с заголовками все хорошо, чего не сказать о сайте физики, и тем более о сайте факультета, на котором отсутствует множество очень важных заголовков, например X-Content-Type-Options, X-Frame-Options, Strict-Transport-Security, что делает сайт уязвимым для атак.


### Проверка SQL Injection для `abit.itmo`

Во время работы с сайтом была замечена 1 интересная вещь в адресной строке, а именно названия курсов, которые фактически могут являться запросами к БД. 

![alt text](images/image_19.png)

Я решил воспользоваться `sqlmap` для автоматической проверки.

![alt text](image.png)

> ВАЖНО! `sqlmap` я запускал без агрессивных параметров, так что сломаться ничего не должно было

По результатам проверки `sqlmap` не было выявлено инъекции в параметре directions.

### Вывод

- Удалось попробовать себя в роли инфобезника, хоть возможно и не самые удачные сайты были выбраны. 
- За счет задания я узнал больше про уязвимости, а также как их можно проверить.
- Знатно пощекотал нервы из-за розыгрыша Артема.
- Ну и суммарно интересно провел время :)